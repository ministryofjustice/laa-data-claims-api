openapi: "3.0.0"
info:
  version: 0.0.1
  title: LAA Data Claims API
  description: |
    This API allows bulk submission and claim management for the LAA Data Stewardship Payments project. 

tags:
  - name: Bulk Submissions
    description: Operations related to bulk submissions
  - name: Submissions
    description: Operations related to submissions
  - name: Claims
    description: Operations related to claims
  - name: Matter Starts
    description: Operations related to matter starts

paths:
  /api/v0/bulk-submissions:
    post:
      operationId: createBulkSubmission
      tags:
        - Bulk Submissions
      summary: Upload a submission file
      description: >
        Upload a file (as multipart/form-data) containing data related to a submission.
        The file is converted into a JSON document and stored in the `bulk_submission` table.
        A 201 response is returned with a `Location` header containing the URI of the created record.
      parameters:
        - name: userId
          in: query
          required: true
          description: The user ID of the user performing the bulk submission
          schema:
            type: string
        - name: offices
          in: query
          required: true
          schema:
            type: array
            items:
              type: string
            description: List of office account numbers
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary
                  description: The submission file to be uploaded.
              required:
                - file
      responses:
        '201':
          description: Bulk Submission accepted and processed
          headers:
            Location:
              description: URI of the created bulk submission resource.
              schema:
                type: string
                format: uri
          content:
            application/json:
              schema:
                type: object
                description: Bulk Submission details
                properties:
                  bulk_submission_id:
                    type: string
                    format: uuid
                    description: UUID of the created bulk submission record.
                  submission_ids:
                    type: array
                    items:
                      type: string
                      format: uuid
                    description: list of UUIDs for the future submission records (only one submission per bulk expected), will have to be sent back in a later call.
        '400':
          description: 'Bad request'
        '401':
          description: 'Unauthorized'
        '403':
          description: 'Forbidden'
        '415':
          description: 'Unsupported Media Type'
        '500':
          description: 'Internal server error'

  /api/v0/bulk-submissions/{id}:
    get:
      operationId: getBulkSubmission
      tags:
        - Bulk Submissions
      summary: Get the contents of a bulk submission
      description: |
        Returns the raw JSON document stored in the `bulk_submission` table,
        identified by its UUID.
      parameters:
        - name: id
          in: path
          required: true
          description: UUID of the bulk submission
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Successfully retrieved bulk submission resource
          content:
            application/json:
              schema:
                type: object
                description: The JSON object representing the `bulk_submission` stored in the corresponding table with bulk submission id and status
                properties:
                  bulk_submission_id:
                    type: string
                    format: uuid
                    description: UUID of the bulk submission.
                  status:
                    $ref: "#/components/schemas/BulkSubmissionStatus"
                  created_by_user_id:
                    type: string
                    description: The user ID of the user who created the bulk submission.
                  details:
                    type: object
                    description: The object storing all the details of the bulk submission
                    properties:
                      office:
                        type: object
                        description: The office submitting a claim
                        properties:
                          account:
                            type: string
                      schedule:
                        type: object
                        description: The details of the bulk submission schedule
                        properties:
                          submission_period:
                            type: string
                          area_of_law:
                            type: string
                          schedule_num:
                            type: string
                      outcomes:
                        type: array
                        description: List of outcome objects for the bulk submission
                        items:
                          $ref: '#/components/schemas/bulk_submission_outcome'
                      matter_starts:
                        type: array
                        description: List of matter start objects for the bulk submission
                        items:
                          $ref: '#/components/schemas/bulk_submission_matter_start'
                      immigration_clr:
                        type: array
                        description: List of immigration CLR rows captured from the bulk submission
                        items:
                          type: object
                          additionalProperties:
                            type: string

        '400':
          description: 'Bad request'
        '401':
          description: 'Unauthorized'
        '403':
          description: 'Forbidden'
        '404':
          description: Bulk submission not found
        '500':
          description: 'Internal server error'
  /api/v0/submissions:
    post:
      operationId: createSubmission
      tags:
        - Submissions
      summary: Create a new submission
      description: |
        Creates a new submission record associated with a bulk submission.
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SubmissionPost'
      responses:
        '201':
          description: Submission created successfully.
          headers:
            location:
              description: URI of the created submission resource.
              schema:
                type: string
                format: uri
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: string
                    format: uuid
                    description: UUID of the created submission.
        '400':
          description: 'Bad request'
        '401':
          description: 'Unauthorized'
        '403':
          description: 'Forbidden'
        '500':
          description: 'Internal server error'

    get:
      operationId: getSubmissions
      x-spring-paginated: true
      tags:
        - Submissions
      summary: get claim submissions
      description: Return claim submissions by office account numbers (mandatory), submissionId, submittedDateFrom, submittedDateTo, areaOfLaw, submissionPeriod
      parameters:
        - name: offices
          in: query
          required: true
          schema:
            type: array
            items:
              type: string
            description: Filter by list of office account numbers
        - name: submission_id
          in: query
          required: false
          schema:
            type: string
          description: Filter by submission ID
        - name: submitted_date_from
          in: query
          required: false
          schema:
            type: string
            format: date
          description: Filter submissions submitted from this date (inclusive)
        - name: submitted_date_to
          in: query
          required: false
          schema:
            type: string
            format: date
          description: Filter submissions submitted up to this date (inclusive)
        - name: area_of_law
          in: query
          required: false
          schema:
            type: string
          description: Filter by area of law
        - name: submission_period
          in: query
          required: false
          schema:
            type: string
          description: Filter by submission period
        - name: submission_statuses
          in: query
          required: false
          schema:
            type: array
            items:
              $ref: "#/components/schemas/submission_status"
          description: Filter by submission statuses

      responses:
        '200':
          description: returns a list of paginated claim submissions
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SubmissionsResultSet'
  /api/v0/claims:
    get:
      operationId: getClaims
      x-spring-paginated: true
      tags:
        - Claims
      summary: Get claims
      description: Get claims for an office, filtering on certain fields.
      parameters:
        - name: office_code
          in: query
          required: true
          schema:
            type: string
          description: |
            The unique account number assigned to the provider office by the LAA.
        - name: submission_id
          in: query
          required: false
          schema:
            type: string
          description: |
            Unique system-generated identifier for each submission
        - name: submission_statuses
          in: query
          required: false
          schema:
            type: array
            items:
              $ref: "#/components/schemas/submission_status"
        - name: fee_code
          in: query
          required: false
          schema:
            type: string
          description: |
            Alphanumeric code identifying the specific fee type or category applicable to the claim 
            under the relevant Legal Aid Agency fee scheme
        - name: unique_file_number
          in: query
          required: false
          schema:
            type: string
          description: Provider's unique case reference number for controlled work billing
        - name: unique_client_number
          in: query
          required: false
          schema:
            type: string
          description: Unique Client Number assigned to the client
        - name: unique_case_id
          in: query
          required: false
          schema:
            type: string
          description: Unique Case Id assigned to the claim case
        - name: claim_statuses
          in: query
          required: false
          schema:
            type: array
            items:
              $ref: "#/components/schemas/claim_status"
      responses:
        '200':
          description: Claims retrieved successfully
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ClaimResultSet'
        '400':
          description: 'Bad request'
        '401':
          description: 'Unauthorized'
        '403':
          description: 'Forbidden'
        '500':
          description: 'Internal server error'
  /api/v0/submissions/{id}/claims:
    post:
      operationId: createClaim
      tags:
        - Claims
      summary: Add a claim to a submission
      description: Adds a claim to the specified submission ID.
      parameters:
        - name: id
          in: path
          required: true
          description: UUID of the parent submission
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/claim_post'
      responses:
        '201':
          description: Claim created successfully
          headers:
            location:
              description: URI of the created claim resource
              schema:
                type: string
                format: uri
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: string
                    format: uuid
                    description: UUID of the created claim
        '400':
          description: 'Bad request'
        '401':
          description: 'Unauthorized'
        '403':
          description: 'Forbidden'
        '500':
          description: 'Internal server error'

  /api/v0/submissions/{id}/matter-starts:
    post:
      operationId: createMatterStart
      tags:
        - Matter Starts
      summary: Create a Matter Start for a Submission
      description: |
        Adds a Matter Start record to the submission with the specified ID.
        Returns HTTP 201 Created with a Location header pointing to the newly created resource.
      parameters:
        - name: id
          in: path
          required: true
          description: UUID of the submission
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/matter_start_post'
      responses:
        '201':
          description: Matter Start created successfully
          headers:
            location:
              description: URI of the newly created Matter Start
              schema:
                type: string
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: string
                    format: uuid
                    description: UUID of the created Matter Start
        '400':
          description: 'Bad request'
        '401':
          description: 'Unauthorized'
        '403':
          description: 'Forbidden'
        '500':
          description: 'Internal server error'
    get:
      operationId: getAllMatterStartsForSubmission
      tags:
        - Matter Starts
      summary: Returns all Matter Starts for a given Submission ID
      description: |
        Returns all Matter Start records belonging to the submission with the specified ID.
      parameters:
        - name: id
          in: path
          required: true
          description: The submission ID
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Returns all Matter Starts for a Submission ID
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/matter_start_result_set'
        '400':
          description: 'Bad request'
        '401':
          description: 'Unauthorized'
        '403':
          description: 'Forbidden'
        '404':
          description: 'Submission ID not found'
        '500':
          description: 'Internal server error'
  /api/v0/submissions/{id}/matter-starts/{matter-start-id}:
    get:
      operationId: getMatterStart
      tags:
        - Matter Starts
      summary: Returns a Matter Start for a Submission
      description: |
        Returns a Matter Start record belonging to the submission with the specified ID.
      parameters:
        - name: id
          in: path
          required: true
          description: UUID of the submission
          schema:
            type: string
            format: uuid
        - name: matter-start-id
          in: path
          required: true
          description: UUID of the matter start
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Returns a Matter Start for a Submission
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/matter_start_get'
        '400':
          description: 'Bad request'
        '401':
          description: 'Unauthorized'
        '403':
          description: 'Forbidden'
        '500':
          description: 'Internal server error'

  /api/v0/submissions/{id}:
    patch:
      operationId: updateSubmission
      tags:
        - Submissions
      summary: Update submission status
      description: Updates the `status` field of an existing submission identified by its ID.
      parameters:
        - name: id
          in: path
          required: true
          description: UUID of the submission to update
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SubmissionPatch'
      responses:
        '204':
          description: 'Submission status updated successfully'
          content: {}
        '400':
          description: 'Bad request'
        '401':
          description: 'Unauthorized'
        '403':
          description: 'Forbidden'
        '404':
          description: 'Submission ID not found'
        '500':
          description: 'Internal server error'

    get:
      operationId: getSubmission
      tags:
        - Submissions
      summary: Get a submission summary by ID
      description: Returns the submission details along with associated claims (ID and status only) and matter starts (IDs only).
      parameters:
        - name: id
          in: path
          required: true
          schema:
            type: string
            format: uuid
          description: UUID of the submission
      responses:
        '200':
          description: Submission found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SubmissionResponse'
        '400':
          description: 'Bad request'
        '401':
          description: 'Unauthorized'
        '403':
          description: 'Forbidden'
        '404':
          description: 'Submission ID not found'
        '500':
          description: 'Internal server error'

  /api/v0/submissions/{submission-id}/claims/{claim-id}:
    get:
      operationId: getClaim
      tags:
        - Claims
      summary: Get a specific claim for a submission
      description: Returns the details of a specific claim associated with a submission.
      parameters:
        - name: submission-id
          in: path
          required: true
          description: ID of the submission
          schema:
            type: string
            format: uuid
        - name: claim-id
          in: path
          required: true
          description: ID of the claim
          schema:
            type: string
            format: uuid
      responses:
        '200':
          description: Claim details
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/claim_response'
        '400':
          description: 'Bad request'
        '401':
          description: 'Unauthorized'
        '403':
          description: 'Forbidden'
        '404':
          description: Submission or claim not found
        '500':
          description: 'Internal server error'

    patch:
      operationId: updateClaim
      tags:
        - Claims
      summary: Update fields of a specific claim
      description: Partially update a claim within a submission. Only fields provided in the request will be updated.
      parameters:
        - name: submission-id
          in: path
          required: true
          description: ID of the submission
          schema:
            type: string
            format: uuid
        - name: claim-id
          in: path
          required: true
          description: ID of the claim to update
          schema:
            type: string
            format: uuid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ClaimPatch'
      responses:
        '204':
          description: Claim updated successfully
          content: {}
        '400':
          description: Invalid request
        '404':
          description: Submission or claim not found
  /api/v0/validation-messages:
    get:
      operationId: getValidationMessages
      x-spring-paginated: true
      tags:
        - Validation Messages
      summary: Gets all validation messages
      description: Returns all the validation messages
      parameters:
        - name: submission-id
          in: query
          required: true
          description: ID of the submission
          schema:
            type: string
            format: uuid
        - name: claim-id
          in: query
          required: false
          description: ID of the claim
          schema:
            type: string
            format: uuid
        - name: type
          in: query
          required: false
          description: type of the validation message
          schema:
            $ref: '#/components/schemas/validation_message_type'
        - name: source
          in: query
          required: false
          description: where the validation message originated
          schema:
            type: string
      responses:
        '200':
          description: Validations messages found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ValidationMessagesResponse'
components:
  schemas:
    BulkSubmissionStatus:
      type: string
      enum:
        - READY_FOR_PARSING
        - PARSING_COMPLETED
        - PARSING_FAILED
        - VALIDATION_FAILED
        - REPLACED
        - UNAUTHORISED
    SubmissionPost:
      allOf:
        - $ref: '#/components/schemas/submission_base'
      required:
        - submission_id
        - bulk_submission_id
        - office_account_number
        - submission_period
        - area_of_law
        - status
        - provider_user_id
        - created_by_user_id
    SubmissionPatch:
      allOf:
        - $ref: '#/components/schemas/submission_base'
      type: object
      properties:
        validation_messages:
          type: array
          items:
            $ref: '#/components/schemas/validation_message_patch'
    submission_status:
      type: string
      enum:
        - CREATED
        - READY_FOR_VALIDATION
        - VALIDATION_IN_PROGRESS
        - VALIDATION_SUCCEEDED
        - VALIDATION_FAILED
        - REPLACED
      description: |
        Processing status indicator tracking the lifecycle stage of the submission from receipt through to completion
    SubmissionClaim:
      type: object
      description: Claim UUID and status
      properties:
        claim_id:
          type: string
          format: uuid
        status:
          $ref: "#/components/schemas/claim_status"
    SubmissionResponse:
      allOf:
        - $ref: '#/components/schemas/submission_base'
        - type: object
          properties:
            claims:
              type: array
              description: List of claims (ID + status) for this submission
              items:
                $ref: '#/components/schemas/SubmissionClaim'
            matter_starts:
              type: array
              description: List of matter start IDs for this submission
              items:
                type: string
                format: uuid
    ValidationMessagesResponse:
      allOf:
        - $ref: "#/components/schemas/page"
      type: 'object'
      properties:
        content:
          type: 'array'
          items:
            $ref: '#/components/schemas/validation_message_base'
        total_claims:
          type: integer
          description: The total number of unique claims that have validation errors

    submission_base:
      type: object
      description: submission details
      properties:
        submission_id:
          type: string
          format: uuid
          description: UUID for submission that was returned when bulk_submission was created.
        bulk_submission_id:
          type: string
          format: uuid
          description: UUID of the associated bulk submission.
        office_account_number:
          type: string
          description: The office account number.
        submission_period:
          type: string
          description: Submission period (e.g., "JUL-2025").
        area_of_law:
          type: string
          description: Area of law (e.g., "crime", "civil").
        provider_user_id:
          type: string
          description: The id of the provider user who created this submission (copied from bulk submission).
        status:
          $ref: "#/components/schemas/submission_status"
        crime_schedule_number:
          type: string
          description: Optional crime schedule number.
        civil_submission_reference:
          type: string
          description: Optional civil submission reference.
        mediation_submission_reference:
          type: string
          description: Optional mediation submission reference.
        previous_submission_id:
          type: string
          format: uuid
          description: UUID of the previous submission that this replaces, if any.
        is_nil_submission:
          type: boolean
          description: Whether the submission is a nil submission, i.e. a submission without any claims.
        number_of_claims:
          type: integer
          description: Number of claims in this submission.
        calculated_total_amount:
          type: number
          description: Total amount calculated from the fee details of each claim.
        submitted:
          type: string
          format: date-time
          description: Date and time the submission was submitted
        created_by_user_id:
          type: string
          description: The id of the user who created the submission.
    SubmissionsResultSet:
      allOf:
        - $ref: "#/components/schemas/page"
      type: 'object'
      properties:
        content:
          type: 'array'
          items:
            $ref: '#/components/schemas/submission_base'

    claim_post:
      allOf:
        - $ref: '#/components/schemas/claim_base'
      required:
        - status
        - line_number
        - matter_type_code
        - created_by_user_id
    ClaimPatch:
      allOf:
        - $ref: '#/components/schemas/claim_response'
        - type: object
          properties:
            validation_messages:
              type: array
              items:
                $ref: '#/components/schemas/validation_message_patch'
    claim_status:
      type: string
      enum:
        - READY_TO_PROCESS
        - VALID
        - INVALID
      description: |
        System-maintained processing status indicator that tracks the validation lifecycle of a
        claim record from initial submission through to final approval or rejection.
    ClaimResultSet:
      allOf:
        - $ref: "#/components/schemas/page"
      type: 'object'
      properties:
        content:
          type: 'array'
          items:
            $ref: '#/components/schemas/claim_response'
    matter_start_result_set:
      type: 'object'
      properties:
        submission_id:
          type: string
          format: uuid
          description: UUID for submission.
        matter_starts:
          type: 'array'
          items:
            $ref: '#/components/schemas/matter_start_get'
    claim_base:
      type: object
      description: Claim details
      properties:
        id:
          type: string
        submission_id:
          type: string
        status:
          $ref: "#/components/schemas/claim_status"
        schedule_reference:
          type: string
        line_number:
          type: integer
        case_reference_number:
          type: string
        unique_file_number:
          type: string
        case_start_date:
          type: string
          description: Date the case was started (format DD/MM/YYYY)
        case_concluded_date:
          type: string
          description: Date the case was concluded (format DD/MM/YYYY)
        matter_type_code:
          type: string
        crime_matter_type_code:
          type: string
        fee_scheme_code:
          type: string
        fee_code:
          type: string
        procurement_area_code:
          type: string
        access_point_code:
          type: string
        delivery_location:
          type: string
        representation_order_date:
          type: string
          description: Date the rep order was created (format DD/MM/YYYY)
        suspects_defendants_count:
          type: integer
        police_station_court_attendances_count:
          type: integer
        police_station_court_prison_id:
          type: string
        dscc_number:
          type: string
        maat_id:
          type: string
        prison_law_prior_approval_number:
          type: string
        is_duty_solicitor:
          type: boolean
        is_youth_court:
          type: boolean
        scheme_id:
          type: string
        mediation_sessions_count:
          type: integer
        mediation_time_minutes:
          type: integer
        outreach_location:
          type: string
        referral_source:
          type: string
# NOTE: Do not use total_value field in any mapping, assignment or logic.
#       This is reserved for future uses when an actual value will be
#       available from the FSP to be assigned.
        total_value:
          type: number
        client_forename:
          type: string
        client_surname:
          type: string
        client_date_of_birth:
          type: string
          description: Client's date of birth (format DD/MM/YYYY)
        unique_client_number:
          type: string
        client_postcode:
          type: string
        gender_code:
          type: string
        ethnicity_code:
          type: string
        disability_code:
          type: string
        is_legally_aided:
          type: boolean
        client_type_code:
          type: string
        home_office_client_number:
          type: string
        cla_reference_number:
          type: string
        cla_exemption_code:
          type: string
        client_2_forename:
          type: string
        client_2_surname:
          type: string
        client_2_date_of_birth:
          type: string
          description: Client 2's date of birth (format DD/MM/YYYY)
        client_2_ucn:
          type: string
        client_2_postcode:
          type: string
        client_2_gender_code:
          type: string
        client_2_ethnicity_code:
          type: string
        client_2_disability_code:
          type: string
        client_2_is_legally_aided:
          type: boolean
        case_id:
          type: string
        unique_case_id:
          type: string
        case_stage_code:
          type: string
        stage_reached_code:
          type: string
        standard_fee_category_code:
          type: string
        outcome_code:
          type: string
        designated_accredited_representative_code:
          type: string
        is_postal_application_accepted:
          type: boolean
        is_client_2_postal_application_accepted:
          type: boolean
        mental_health_tribunal_reference:
          type: string
        is_nrm_advice:
          type: boolean
        follow_on_work:
          type: string
        transfer_date:
          type: string
          description: Transfer Date (format DD/MM/YYYY)
        exemption_criteria_satisfied:
          type: string
        exceptional_case_funding_reference:
          type: string
        is_legacy_case:
          type: boolean
        advice_time:
          type: integer
        travel_time:
          type: integer
        waiting_time:
          type: integer
        net_profit_costs_amount:
          type: number
        net_disbursement_amount:
          type: number
        net_counsel_costs_amount:
          type: number
        disbursements_vat_amount:
          type: number
        travel_waiting_costs_amount:
          type: number
        net_waiting_costs_amount:
          type: number
        is_vat_applicable:
          type: boolean
        is_tolerance_applicable:
          type: boolean
        prior_authority_reference:
          type: string
        is_london_rate:
          type: boolean
        adjourned_hearing_fee_amount:
          type: integer
          description: "Note: actually stores the number of times the hearing was adjourned"
        is_additional_travel_payment:
          type: boolean
        costs_damages_recovered_amount:
          type: number
        meetings_attended_code:
          type: string
        detention_travel_waiting_costs_amount:
          type: number
        jr_form_filling_amount:
          type: number
        is_eligible_client:
          type: boolean
        court_location_code:
          type: string
        advice_type_code:
          type: string
        medical_reports_count:
          type: integer
        is_irc_surgery:
          type: boolean
        surgery_date:
          type: string
          description: Surgery Date (format DD/MM/YYYY)
        surgery_clients_count:
          type: integer
        surgery_matters_count:
          type: integer
        cmrh_oral_count:
          type: integer
        cmrh_telephone_count:
          type: integer
        ait_hearing_centre_code:
          type: string
        is_substantive_hearing:
          type: boolean
        ho_interview:
          type: integer
          description: "Number of Home Office Interviews"
        local_authority_number:
          type: string
        submission_period:
          type: string
          description: Submission period (e.g., "JUL-2025").
        created_by_user_id:
          type: string
          description: The id of the user who created the claim.
    claim_response:
      allOf:
        - $ref: '#/components/schemas/claim_base'
        - type: object
          properties:
            fee_calculation_response:
              $ref: '#/components/schemas/fee_calculation_patch'
    fee_calculation_patch:
      type: object
      description: Fee calculation response from the Fee Scheme Platform
      properties:
        calculated_fee_detail_id:
          type: string
        claim_summary_fee_id:
          type: string
          format: uuid
        claim_id:
          type: string
          format: uuid
        fee_code:
          type: string
        fee_code_description:
          type: string
        fee_type:
          $ref: "#/components/schemas/fee_calculation_type"
        category_of_law:
          type: string
        total_amount:
          type: number
        vat_indicator:
          type: boolean
        vat_rate_applied:
          type: number
        calculated_vat_amount:
          type: number
        disbursement_amount:
          type: number
        requested_net_disbursement_amount:
          type: number
        disbursement_vat_amount:
          type: number
        hourly_total_amount:
          type: number
        fixed_fee_amount:
          type: number
        net_profit_costs_amount:
          type: number
        requested_net_profit_costs_amount:
          type: number
        net_cost_of_counsel_amount:
          type: number
        net_travel_costs_amount:
          type: number
        net_waiting_costs_amount:
          type: number
        detention_travel_and_waiting_costs_amount:
          type: number
        jr_form_filling_amount:
          type: number
        travel_and_waiting_costs_amount:
          type: number
        bolt_on_details:
          $ref: "#/components/schemas/bolt_on_patch"
    bolt_on_patch:
      type: object
      description: Bolt on details
      properties:
        bolt_on_total_fee_amount:
          type: number
        bolt_on_adjourned_hearing_count:
          type: integer
        bolt_on_adjourned_hearing_fee:
          type: number
        bolt_on_cmrh_telephone_count:
          type: integer
        bolt_on_cmrh_telephone_fee:
          type: number
        bolt_on_cmrh_oral_count:
          type: integer
        bolt_on_cmrh_oral_fee:
          type: number
        bolt_on_home_office_interview_count:
          type: integer
        bolt_on_home_office_interview_fee:
          type: number
        bolt_on_substantive_hearing_count:
          type: integer
        bolt_on_substantive_hearing_fee:
          type: number
        escape_case_flag:
          type: boolean
        scheme_id:
          type: string

    bulk_submission_matter_start:
      type: object
      description: matter start details for a bulk submission
      properties:
        schedule_ref:
          type: string
        category_code:
          type: string
        procurement_area:
          type: string
        access_point:
          type: string
        delivery_location:
          type: string
    bulk_submission_outcome:
      type: object
      description: bulk submission outcome details
      properties:
        matter_type:
          type: string
        fee_code:
          type: string
        case_ref_number:
          type: string
        case_start_date:
          type: string
        case_id:
          type: string
        case_stage_level:
          type: string
        ufn:
          type: string
        procurement_area:
          type: string
        access_point:
          type: string
        client_forename:
          type: string
        client_surname:
          type: string
        client_date_of_birth:
          type: string
        ucn:
          type: string
        cla_ref_number:
          type: string
        cla_exemption:
          type: string
        gender:
          type: string
        ethnicity:
          type: string
        disability:
          type: string
        client_post_code:
          type: string
        work_concluded_date:
          type: string
        advice_time:
          type: integer
        travel_time:
          type: integer
        waiting_time:
          type: integer
        profit_cost:
          type: number
          format: bigDecimal
        value_of_costs:
          type: number
          format: bigDecimal
        disbursements_amount:
          type: number
          format: bigDecimal
        counsel_cost:
          type: number
          format: bigDecimal
        disbursements_vat:
          type: number
          format: bigDecimal
        travel_waiting_costs:
          type: number
          format: bigDecimal
        vat_indicator:
          type: boolean
        london_nonlondon_rate:
          type: boolean
        client_type:
          type: string
        tolerance_indicator:
          type: boolean
        travel_costs:
          type: number
          format: bigDecimal
        outcome_code:
          type: string
        legacy_case:
          type: boolean
        claim_type:
          type: string
        adjourned_hearing_fee:
          type: integer
          description: "Note: actually stores the number of times the hearing was adjourned"
        type_of_advice:
          type: string
        postal_appl_accp:
          type: boolean
        schedule_ref:
          type: string
        cmrh_oral:
          type: string
        cmrh_telephone:
          type: string
        ait_hearing_centre:
          type: string
        substantive_hearing:
          type: boolean
        ho_interview:
          type: integer
          description: "Number of Home Office Interviews"
        ho_ucn:
          type: string
        transfer_date:
          type: string
        detention_travel_waiting_costs:
          type: number
          format: bigDecimal
        delivery_location:
          type: string
        prior_authority_ref:
          type: string
        jr_form_filling:
          type: string
        additional_travel_payment:
          type: boolean
        meetings_attended:
          type: string
        medical_reports_claimed:
          type: integer
        desi_acc_rep:
          type: integer
          description: "designated accredited representative"
        mht_ref_number:
          type: string
        stage_reached:
          type: string
        follow_on_work:
          type: string
        national_ref_mechanism_advice:
          type: string
        exemption_criteria_satisfied:
          type: string
        excl_case_funding_ref:
          type: string
        no_of_clients:
          type: integer
        no_of_surgery_clients:
          type: integer
        irc_surgery:
          type: string
        surgery_date:
          type: string
        line_number:
          type: string
        crime_matter_type:
          type: string
        fee_scheme:
          type: string
        rep_order_date:
          type: string
        no_of_suspects:
          type: integer
        no_of_police_station:
          type: integer
        police_station:
          type: string
        dscc_number:
          type: string
        maat_id:
          type: string
        prison_law_prior_approval:
          type: string
        duty_solicitor:
          type: string
        youth_court:
          type: string
        scheme_id:
          type: string
        number_of_mediation_sessions:
          type: integer
        mediation_time:
          type: integer
        outreach:
          type: string
        referral:
          type: string
        client_legally_aided:
          type: string
        client2_forename:
          type: string
        client2_surname:
          type: string
        client2_date_of_birth:
          type: string
        client2_ucn:
          type: string
        client2_post_code:
          type: string
        client2_gender:
          type: string
        client2_ethnicity:
          type: string
        client2_disability:
          type: string
        client2_legally_aided:
          type: string
        unique_case_id:
          type: string
        standard_fee_cat:
          type: string
        client_2_postal_appl_accp:
          type: string
        costs_damages_recovered:
          type: string
        eligible_client:
          type: string
        court_location:
          type: string
        local_authority_number:
          type: string
        pa_number:
          type: string
        excess_travel_costs:
          type: number
          format: bigDecimal
        med_concluded_date:
          type: string
    matter_start_post:
      allOf:
      - $ref: '#/components/schemas/matter_start_fields'
    matter_start_get:
      allOf:
      - $ref: '#/components/schemas/matter_start_fields'
    matter_start_fields:
      type: object
      description: Matter start for a submission
      properties:
        schedule_reference:
          type: string
        category_code:
          type: string
        procurement_area_code:
          type: string
        access_point_code:
          type: string
        delivery_location:
          type: string
        mediation_type:
          $ref: "#/components/schemas/mediation_type"
        created_by_user_id:
          type: string
          description: The id of the user who created the matter start.
    mediation_type:
      type: string
      enum:
        - "MDCS Child Only Sole"
        - "MDCC Child Only Co"
        - "MDPS Property & Finance Sole"
        - "MDPC Property & Finance Co"
        - "MDAS All Issues Sole"
        - "MDAC All Issues Co"
      description: |
        The type of mediation for matter start.
    validation_message_patch:
      type: object
      description: Validation message
      properties:
        type:
          $ref: "#/components/schemas/validation_message_type"
        source:
          type: string
        display_message:
          type: string
        technical_message:
          type: string
    validation_message_base:
      type: object
      description: Validation message
      properties:
        id:
          type: string
          format: uuid
        submission_id:
          type: string
          format: uuid
        claim_id:
          type: string
          format: uuid
        type:
          $ref: "#/components/schemas/validation_message_type"
        source:
          type: string
        display_message:
          type: string
    validation_message_type:
      type: string
      enum:
        - ERROR
        - WARNING
      description: |
        The type of validation message, indicating its severity or nature.
    fee_calculation_type:
      type: string
      enum:
        - HOURLY
        - FIXED
        - DISBURSEMENT_ONLY
      description: |
        The type of the fee, indicating the nature of the calculated fee returned by Fee Scheme Platform.
    page:
      type: 'object'
      properties:
        total_pages:
          type: 'integer'
        total_elements:
          type: 'integer'
        number:
          type: 'integer'
        size:
          type: 'integer'
