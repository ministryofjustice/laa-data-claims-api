description: "LEGAL HELP submission claims export"
provider: submissionClaimsLegalHelpProvider
packageName: uk.gov.justice.laa.dstew.payments.claimsdata.export.generated
maxRows: 50000
sql: |
  select
    s.office_account_number as officeAccountNumber,
    s.submission_period as submissionPeriod,
    s.area_of_law as areaOfLaw,
    s.legal_help_submission_reference as scheduleNum,
    c.fee_code as feeCode,
    c.schedule_reference as scheduleReference,
    c.case_reference_number as caseReferenceNumber,
    c.case_start_date as caseStartDate,
    claim_case.case_id as caseId,
    c.unique_file_number as ufn,
    c.procurement_area_code as procurementArea,
    c.access_point_code as accessPoint,
    c.delivery_location as deliveryLocation,
    client.client_forename as clientForename,
    client.client_surname as clientSurname,
    client.client_date_of_birth as clientDateOfBirth,
    client.unique_client_number as clientUcn,
    client.home_office_client_number as homeOfficeClientNumber,
    client.cla_reference_number as claReferenceNumber,
    client.cla_exemption_code as claExemptionCode,
    client.gender_code as gender,
    client.ethnicity_code as ethnicity,
    client.disability_code as disability,
    client.client_postcode as clientPostcode,
    c.case_concluded_date as caseConcludedDate,
    c.matter_type_code as matterType,
    claim_case.case_stage_code as caseStageLevel,
    csf.advice_time as adviceTime,
    csf.travel_time as travelTime,
    csf.waiting_time as waitingTime,
    csf.net_profit_costs_amount as netProfitCostsAmount,
    csf.net_disbursement_amount as netDisbursementAmount,
    csf.net_counsel_costs_amount as netCounselCostsAmount,
    csf.disbursements_vat_amount as disbursementsVatAmount,
    csf.travel_waiting_costs_amount as travelWaitingCostsAmount,
    csf.is_vat_applicable as vatIndicator,
    csf.is_tolerance_applicable as toleranceIndicator,
    claim_case.is_legacy_case as legacyCase,
    csf.prior_authority_reference as priorAuthorityReference,
    csf.is_london_rate as londonRate,
    csf.adjourned_hearing_fee_amount as adjournedHearingFeeAmount,
    csf.is_additional_travel_payment as additionalTravelPayment,
    csf.costs_damages_recovered_amount as costsDamagesRecoveredAmount,
    csf.meetings_attended_code as meetingsAttendedCode,
    csf.detention_travel_waiting_costs_amount as detentionTravelWaitingCostsAmount,
    csf.jr_form_filling_amount as jrFormFillingAmount,
    csf.is_eligible_client as eligibleClient,
    csf.court_location_code as courtLocationCode,
    csf.cmrh_oral_count as cmrhOralCount,
    csf.cmrh_telephone_count as cmrhTelephoneCount,
    csf.ait_hearing_centre_code as aitHearingCentreCode,
    csf.is_substantive_hearing as substantiveHearing,
    csf.ho_interview as hoInterview,
    csf.local_authority_number as localAuthorityNumber,
    client.client_type_code as clientType,
    claim_case.stage_reached_code as stageReached,
    claim_case.outcome_code as outcomeCode,
    csf.advice_type_code as adviceType,
    csf.medical_reports_count as medicalReportsCount,
    claim_case.transfer_date as transferDate,
    claim_case.exemption_criteria_satisfied as exemptionCriteriaSatisfied,
    csf.is_irc_surgery as ircSurgery,
    csf.surgery_date as surgeryDate,
    csf.surgery_clients_count as surgeryClientsCount,
    csf.surgery_matters_count as surgeryMattersCount,
    claim_case.designated_accredited_representative_code as designatedAccreditedRepresentative,
    claim_case.is_postal_application_accepted as postalApplicationAccepted,
    claim_case.mental_health_tribunal_reference as mentalHealthTribunalReference,
    claim_case.exceptional_case_funding_reference as exceptionalCaseFundingReference,
    claim_case.is_nrm_advice as nrmAdvice,
    claim_case.follow_on_work as followOnWork,
    cfd.fee_code as feeDetailFeeCode,
    cfd.fee_code_description as feeDetailFeeCodeDescription,
    cfd.fee_type as feeDetailFeeType,
    cfd.category_of_law as feeDetailCategoryOfLaw,
    cfd.total_amount as feeDetailTotalAmount,
    cfd.vat_indicator as feeDetailVatIndicator,
    cfd.vat_rate_applied as feeDetailVatRateApplied,
    cfd.calculated_vat_amount as feeDetailCalculatedVatAmount,
    cfd.disbursement_amount as feeDetailDisbursementAmount,
    cfd.requested_net_disbursement_amount as feeDetailRequestedNetDisbursementAmount,
    cfd.disbursement_vat_amount as feeDetailDisbursementVatAmount,
    cfd.hourly_total_amount as feeDetailHourlyTotalAmount,
    cfd.fixed_fee_amount as feeDetailFixedFeeAmount,
    cfd.net_profit_costs_amount as feeDetailNetProfitCostsAmount,
    cfd.requested_net_profit_costs_amount as feeDetailRequestedNetProfitCostsAmount,
    cfd.net_cost_of_counsel_amount as feeDetailNetCostOfCounselAmount,
    cfd.net_travel_costs_amount as feeDetailNetTravelCostsAmount,
    cfd.net_waiting_costs_amount as feeDetailNetWaitingCostsAmount,
    cfd.detention_travel_and_waiting_costs_amount as feeDetailDetentionTravelAndWaitingCostsAmount,
    cfd.jr_form_filling_amount as feeDetailJrFormFillingAmount,
    cfd.travel_and_waiting_costs_amount as feeDetailTravelAndWaitingCostsAmount,
    cfd.bolt_on_total_fee_amount as feeDetailBoltOnTotalFeeAmount,
    cfd.bolt_on_adjourned_hearing_count as feeDetailBoltOnAdjournedHearingCount,
    cfd.bolt_on_adjourned_hearing_fee as feeDetailBoltOnAdjournedHearingFee,
    cfd.bolt_on_cmrh_telephone_count as feeDetailBoltOnCmrhTelephoneCount,
    cfd.bolt_on_cmrh_telephone_fee as feeDetailBoltOnCmrhTelephoneFee,
    cfd.bolt_on_cmrh_oral_count as feeDetailBoltOnCmrhOralCount,
    cfd.bolt_on_cmrh_oral_fee as feeDetailBoltOnCmrhOralFee,
    cfd.bolt_on_home_office_interview_count as feeDetailBoltOnHomeOfficeInterviewCount,
    cfd.bolt_on_home_office_interview_fee as feeDetailBoltOnHomeOfficeInterviewFee,
    cfd.bolt_on_substantive_hearing_fee as feeDetailBoltOnSubstantiveHearingFee,
    cfd.escape_case_flag as feeDetailEscapeCaseFlag,
    cfd.scheme_id as feeDetailSchemeId
  from claims.submission s
  join claims.claim c on c.submission_id = s.id
  left join claims.client client on client.claim_id = c.id
  left join claims.claim_case claim_case on claim_case.claim_id = c.id
  left join claims.claim_summary_fee csf on csf.claim_id = c.id
  left join claims.calculated_fee_detail cfd on cfd.claim_id = c.id
  where s.id = :submissionId
    and s.office_account_number = :office
    and s.area_of_law = 'LEGAL_HELP'
  limit :maxRows
columns:
  - key: officeAccountNumber
    header: Providers LAA Office Number
  - key: submissionPeriod
    header: Submission Month
  - key: areaOfLaw
    header: Area of Law
  - key: scheduleNum
    header: Legal Help Submission Reference
  - key: feeCode
    header: Fee Code
  - key: scheduleReference
    header: Schedule Reference
  - key: caseReferenceNumber
    header: Case Reference Number
  - key: caseStartDate
    header: Case Start Date
  - key: caseId
    header: Case ID
  - key: ufn
    header: UFN
  - key: procurementArea
    header: Procurement Area
  - key: accessPoint
    header: Access Point
  - key: deliveryLocation
    header: Delivery Location
  - key: clientForename
    header: Client Forename
  - key: clientSurname
    header: Client Surname
  - key: clientDateOfBirth
    header: Client Date of Birth
  - key: clientUcn
    header: UCN
  - key: homeOfficeClientNumber
    header: HO UCN
  - key: claReferenceNumber
    header: CLA Reference Number
  - key: claExemptionCode
    header: CLA Exemption Code
  - key: gender
    header: Gender
  - key: ethnicity
    header: Ethnicity
  - key: disability
    header: Disability
  - key: clientPostcode
    header: Client Postcode
  - key: caseConcludedDate
    header: Case Concluded Date/Case Claimed Date
  - key: matterType
    header: Matter Type (1:2)
  - key: caseStageLevel
    header: Case Stage/Level
  - key: adviceTime
    header: Advice Time
  - key: travelTime
    header: Travel Time
  - key: waitingTime
    header: Waiting Time
  - key: netProfitCostsAmount
    header: Net Profit Costs (Including Travel & Waiting / Excluding VAT)
  - key: netDisbursementAmount
    header: Net Disbursement Amount (Excluding VAT)
  - key: netCounselCostsAmount
    header: Net Cost of Counsel (Excluding VAT)
  - key: disbursementsVatAmount
    header: Disbursements VAT amount
  - key: travelWaitingCostsAmount
    header: Travel & Waiting Costs
  - key: vatIndicator
    header: VAT Indicator
  - key: toleranceIndicator
    header: Tolerance indicator
  - key: legacyCase
    header: Legacy Case
  - key: priorAuthorityReference
    header: NIAT Disbursement Prior Authority Number
  - key: londonRate
    header: London / Non London rate
  - key: adjournedHearingFeeAmount
    header: Adjourned Hearing Fee
  - key: additionalTravelPayment
    header: Additional Travel Payment
  - key: costsDamagesRecoveredAmount
    header: Value of Costs/Damages recovered
  - key: meetingsAttendedCode
    header: Meetings Attended?
  - key: detentionTravelWaitingCostsAmount
    header: Detention Travel & Waiting Costs (Excluding VAT)
  - key: jrFormFillingAmount
    header: JR / Form Filling (Excluding VAT)
  - key: eligibleClient
    header: Eligible Client
  - key: courtLocationCode
    header: Court Location (HPCDS)
  - key: cmrhOralCount
    header: CMRH Oral
  - key: cmrhTelephoneCount
    header: CMRH Telephone
  - key: aitHearingCentreCode
    header: AIT Hearing Centre
  - key: substantiveHearing
    header: Substantive hearing?
  - key: hoInterview
    header: HO Interview
  - key: localAuthorityNumber
    header: Local Authority number
  - key: clientType
    header: Client Type
  - key: stageReached
    header: Stage Reached
  - key: outcomeCode
    header: Outcome for client
  - key: adviceType
    header: Type of Advice
  - key: transferDate
    header: Transfer Date
  - key: medicalReportsCount
    header: Medical Reports Claimed
  - key: exemptionCriteriaSatisfied
    header: Exemption Criteria Satisfied
  - key: ircSurgery
    header: IRC Surgery
  - key: surgeryDate
    header: Surgery date
  - key: surgeryClientsCount
    header: No of clients seen at surgery
  - key: surgeryMattersCount
    header: No of clients resulting in a Legal Help matter opened
  - key: designatedAccreditedRepresentative
    header: Designated Accredited Representative
  - key: postalApplicationAccepted
    header: Postal Application Accepted
  - key: mentalHealthTribunalReference
    header: Mental Health Tribunal reference
  - key: exceptionalCaseFundingReference
    header: Exceptional Case Funding Reference
  - key: nrmAdvice
    header: NRM Advice
  - key: followOnWork
    header: Follow on work
  - key: feeDetailFeeCode
    header: Calculated Fee Detail - Fee Code
  - key: feeDetailFeeCodeDescription
    header: Calculated Fee Detail - Fee Code Description
  - key: feeDetailFeeType
    header: Calculated Fee Detail - Fee Type
  - key: feeDetailCategoryOfLaw
    header: Calculated Fee Detail - Category of Law
  - key: feeDetailTotalAmount
    header: Calculated Fee Detail - Total Amount
  - key: feeDetailVatIndicator
    header: Calculated Fee Detail - VAT Indicator
  - key: feeDetailVatRateApplied
    header: Calculated Fee Detail - VAT Rate Applied
  - key: feeDetailCalculatedVatAmount
    header: Calculated Fee Detail - Calculated VAT Amount
  - key: feeDetailDisbursementAmount
    header: Calculated Fee Detail - Disbursement Amount
  - key: feeDetailRequestedNetDisbursementAmount
    header: Calculated Fee Detail - Requested Net Disbursement Amount
  - key: feeDetailDisbursementVatAmount
    header: Calculated Fee Detail - Disbursement VAT Amount
  - key: feeDetailHourlyTotalAmount
    header: Calculated Fee Detail - Hourly Total Amount
  - key: feeDetailFixedFeeAmount
    header: Calculated Fee Detail - Fixed Fee Amount
  - key: feeDetailNetProfitCostsAmount
    header: Calculated Fee Detail - Net Profit Costs Amount
  - key: feeDetailRequestedNetProfitCostsAmount
    header: Calculated Fee Detail - Requested Net Profit Costs Amount
  - key: feeDetailNetCostOfCounselAmount
    header: Calculated Fee Detail - Net Cost Of Counsel Amount
  - key: feeDetailNetTravelCostsAmount
    header: Calculated Fee Detail - Net Travel Costs Amount
  - key: feeDetailNetWaitingCostsAmount
    header: Calculated Fee Detail - Net Waiting Costs Amount
  - key: feeDetailDetentionTravelAndWaitingCostsAmount
    header: Calculated Fee Detail - Detention Travel And Waiting Costs Amount
  - key: feeDetailJrFormFillingAmount
    header: Calculated Fee Detail - JR Form Filling Amount
  - key: feeDetailTravelAndWaitingCostsAmount
    header: Calculated Fee Detail - Travel And Waiting Costs Amount
  - key: feeDetailBoltOnTotalFeeAmount
    header: Calculated Fee Detail - Bolt On Total Fee Amount
  - key: feeDetailBoltOnAdjournedHearingCount
    header: Calculated Fee Detail - Bolt On Adjourned Hearing Count
  - key: feeDetailBoltOnAdjournedHearingFee
    header: Calculated Fee Detail - Bolt On Adjourned Hearing Fee
  - key: feeDetailBoltOnCmrhTelephoneCount
    header: Calculated Fee Detail - Bolt On CMRH Telephone Count
  - key: feeDetailBoltOnCmrhTelephoneFee
    header: Calculated Fee Detail - Bolt On CMRH Telephone Fee
  - key: feeDetailBoltOnCmrhOralCount
    header: Calculated Fee Detail - Bolt On CMRH Oral Count
  - key: feeDetailBoltOnCmrhOralFee
    header: Calculated Fee Detail - Bolt On CMRH Oral Fee
  - key: feeDetailBoltOnHomeOfficeInterviewCount
    header: Calculated Fee Detail - Bolt On Home Office Interview Count
  - key: feeDetailBoltOnHomeOfficeInterviewFee
    header: Calculated Fee Detail - Bolt On Home Office Interview Fee
  - key: feeDetailBoltOnSubstantiveHearingFee
    header: Calculated Fee Detail - Bolt On Substantive Hearing Fee
  - key: feeDetailEscapeCaseFlag
    header: Calculated Fee Detail - Escape Case Flag
  - key: feeDetailSchemeId
    header: Calculated Fee Detail - Scheme ID
params:
  - name: submissionId
    type: UUID
    required: true
  - name: office
    type: STRING
    required: true
