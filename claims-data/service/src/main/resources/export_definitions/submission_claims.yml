description: "Claims data for a submission"
provider: submissionClaimsExportProvider
packageName: uk.gov.justice.laa.dstew.payments.claimsdata.export.generated
maxRows: 50000
sql: |
  select
    s.id as submissionId,
    s.submission_period as submissionPeriod,
    s.area_of_law as submissionAreaOfLaw,
    s.status as submissionStatus,
    s.office_account_number as office,
    s.created_on as submissionCreatedOn,
    s.updated_on as submissionUpdatedOn,
    c.id as claimId,
    c.status as claimStatus,
    c.schedule_reference as scheduleReference,
    c.line_number as lineNumber,
    c.case_reference_number as caseReferenceNumber,
    c.unique_file_number as uniqueFileNumber,
    c.case_start_date as caseStartDate,
    c.case_concluded_date as caseConcludedDate,
    c.matter_type_code as matterTypeCode,
    c.crime_matter_type_code as crimeMatterTypeCode,
    c.fee_scheme_code as feeSchemeCode,
    c.fee_code as feeCode,
    c.procurement_area_code as procurementAreaCode,
    c.access_point_code as accessPointCode,
    c.delivery_location as deliveryLocation,
    c.representation_order_date as representationOrderDate,
    c.suspects_defendants_count as suspectsDefendantsCount,
    c.police_station_court_attendances_count as policeStationCourtAttendancesCount,
    c.police_station_court_prison_id as policeStationCourtPrisonId,
    c.dscc_number as dsccNumber,
    c.maat_id as maatId,
    c.prison_law_prior_approval_number as prisonLawPriorApprovalNumber,
    c.is_duty_solicitor as dutySolicitor,
    c.is_youth_court as youthCourt,
    c.scheme_id as schemeId,
    c.mediation_sessions_count as mediationSessionsCount,
    c.mediation_time_minutes as mediationTimeMinutes,
    c.outreach_location as outreachLocation,
    c.referral_source as referralSource,
    c.matched_claim_id as matchedClaimId,
    c.created_on as claimCreatedOn,
    c.updated_on as claimUpdatedOn,
    client.client_forename as clientForename,
    client.client_surname as clientSurname,
    client.client_date_of_birth as clientDateOfBirth,
    client.unique_client_number as uniqueClientNumber,
    client.client_postcode as clientPostcode,
    client.gender_code as genderCode,
    client.ethnicity_code as ethnicityCode,
    client.disability_code as disabilityCode,
    client.is_legally_aided as legallyAided,
    client.client_type_code as clientTypeCode,
    client.home_office_client_number as homeOfficeClientNumber,
    client.cla_reference_number as claReferenceNumber,
    client.cla_exemption_code as claExemptionCode,
    client.client_2_forename as client2Forename,
    client.client_2_surname as client2Surname,
    client.client_2_date_of_birth as client2DateOfBirth,
    client.client_2_ucn as client2Ucn,
    client.client_2_postcode as client2Postcode,
    client.client_2_gender_code as client2GenderCode,
    client.client_2_ethnicity_code as client2EthnicityCode,
    client.client_2_disability_code as client2DisabilityCode,
    client.client_2_is_legally_aided as client2IsLegallyAided,
    claim_case.case_id as caseId,
    claim_case.unique_case_id as uniqueCaseId,
    claim_case.case_stage_code as caseStageCode,
    claim_case.stage_reached_code as stageReachedCode,
    claim_case.standard_fee_category_code as standardFeeCategoryCode,
    claim_case.outcome_code as outcomeCode,
    claim_case.designated_accredited_representative_code as designatedAccreditedRepresentativeCode,
    claim_case.is_postal_application_accepted as postalApplicationAccepted,
    claim_case.is_client_2_postal_application_accepted as client2PostalApplicationAccepted,
    claim_case.mental_health_tribunal_reference as mentalHealthTribunalReference,
    claim_case.is_nrm_advice as nrmAdvice,
    claim_case.follow_on_work as followOnWork,
    claim_case.transfer_date as transferDate,
    claim_case.exemption_criteria_satisfied as exemptionCriteriaSatisfied,
    claim_case.exceptional_case_funding_reference as exceptionalCaseFundingReference,
    claim_case.is_legacy_case as legacyCase,
    csf.advice_time as adviceTime,
    csf.travel_time as travelTime,
    csf.waiting_time as waitingTime,
    csf.net_profit_costs_amount as netProfitCostsAmount,
    csf.net_disbursement_amount as netDisbursementAmount,
    csf.net_counsel_costs_amount as netCounselCostsAmount,
    csf.disbursements_vat_amount as disbursementsVatAmount,
    csf.travel_waiting_costs_amount as travelWaitingCostsAmount,
    csf.net_waiting_costs_amount as netWaitingCostsAmount,
    csf.is_vat_applicable as vatApplicable,
    csf.is_tolerance_applicable as toleranceApplicable,
    csf.prior_authority_reference as priorAuthorityReference,
    csf.is_london_rate as londonRate,
    csf.adjourned_hearing_fee_amount as adjournedHearingFeeAmount,
    csf.is_additional_travel_payment as additionalTravelPayment,
    csf.costs_damages_recovered_amount as costsDamagesRecoveredAmount,
    csf.meetings_attended_code as meetingsAttendedCode,
    csf.detention_travel_waiting_costs_amount as detentionTravelWaitingCostsAmount,
    csf.jr_form_filling_amount as jrFormFillingAmount,
    csf.is_eligible_client as eligibleClient,
    csf.court_location_code as courtLocationCode,
    csf.advice_type_code as adviceTypeCode,
    csf.medical_reports_count as medicalReportsCount,
    csf.is_irc_surgery as ircSurgery,
    csf.surgery_date as surgeryDate,
    csf.surgery_clients_count as surgeryClientsCount,
    csf.surgery_matters_count as surgeryMattersCount,
    csf.cmrh_oral_count as cmrhOralCount,
    csf.cmrh_telephone_count as cmrhTelephoneCount,
    csf.ait_hearing_centre_code as aitHearingCentreCode,
    csf.is_substantive_hearing as substantiveHearing,
    csf.ho_interview as hoInterview,
    csf.local_authority_number as localAuthorityNumber,
    cfd.fee_code as feeDetailFeeCode,
    cfd.fee_type as feeDetailFeeType,
    cfd.fee_code_description as feeDetailFeeCodeDescription,
    cfd.category_of_law as feeDetailCategoryOfLaw,
    cfd.total_amount as feeDetailTotalAmount,
    cfd.vat_indicator as feeDetailVatIndicator,
    cfd.vat_rate_applied as feeDetailVatRateApplied,
    cfd.calculated_vat_amount as feeDetailCalculatedVatAmount,
    cfd.disbursement_amount as feeDetailDisbursementAmount,
    cfd.requested_net_disbursement_amount as feeDetailRequestedNetDisbursementAmount,
    cfd.disbursement_vat_amount as feeDetailDisbursementVatAmount,
    cfd.hourly_total_amount as feeDetailHourlyTotalAmount,
    cfd.fixed_fee_amount as feeDetailFixedFeeAmount,
    cfd.net_profit_costs_amount as feeDetailNetProfitCostsAmount,
    cfd.requested_net_profit_costs_amount as feeDetailRequestedNetProfitCostsAmount,
    cfd.net_cost_of_counsel_amount as feeDetailNetCostOfCounselAmount,
    cfd.net_travel_costs_amount as feeDetailNetTravelCostsAmount,
    cfd.net_waiting_costs_amount as feeDetailNetWaitingCostsAmount,
    cfd.detention_travel_and_waiting_costs_amount as feeDetailDetentionTravelAndWaitingCostsAmount,
    cfd.jr_form_filling_amount as feeDetailJrFormFillingAmount,
    cfd.travel_and_waiting_costs_amount as feeDetailTravelAndWaitingCostsAmount,
    cfd.bolt_on_total_fee_amount as feeDetailBoltOnTotalFeeAmount,
    cfd.bolt_on_adjourned_hearing_count as feeDetailBoltOnAdjournedHearingCount,
    cfd.bolt_on_adjourned_hearing_fee as feeDetailBoltOnAdjournedHearingFee,
    cfd.bolt_on_cmrh_telephone_count as feeDetailBoltOnCmrhTelephoneCount,
    cfd.bolt_on_cmrh_telephone_fee as feeDetailBoltOnCmrhTelephoneFee,
    cfd.bolt_on_cmrh_oral_count as feeDetailBoltOnCmrhOralCount,
    cfd.bolt_on_cmrh_oral_fee as feeDetailBoltOnCmrhOralFee,
    cfd.bolt_on_home_office_interview_count as feeDetailBoltOnHomeOfficeInterviewCount,
    cfd.bolt_on_home_office_interview_fee as feeDetailBoltOnHomeOfficeInterviewFee,
    cfd.bolt_on_substantive_hearing_fee as feeDetailBoltOnSubstantiveHearingFee,
    cfd.escape_case_flag as feeDetailEscapeCaseFlag,
    cfd.scheme_id as feeDetailSchemeId
  from claims.submission s
  join claims.claim c on c.submission_id = s.id
  left join claims.client client on client.claim_id = c.id
  left join claims.claim_case claim_case on claim_case.claim_id = c.id
  left join claims.claim_summary_fee csf on csf.claim_id = c.id
  left join claims.calculated_fee_detail cfd on cfd.claim_id = c.id
  where s.id = :submissionId
  and s.office = :office
  order by c.line_number asc
  limit :maxRows
columns:
  - key: submissionId
    header: "Submission ID"
params:
  - name: submissionId
    type: uuid
    required: true
  - name: office
    type: String
    required: true